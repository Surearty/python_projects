#                       –ü–∞—Ä—Å–µ—Ä —Ü–∏–∞–Ω (cian parser)


–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞ –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º 4 –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
üì¶ 1. requests - –ü—Ä–æ—Å—Ç–æ, –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Å–∞–π—Ç–æ–≤.
```python
import requests

response = requests.get("https://example.com")
html = response.text
```
üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: httpx –∏–ª–∏ aiohttp (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –¥–µ–ª–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

üçú 2. beautifulsoup4 - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML. –û—á–µ–Ω—å —É–¥–æ–±–Ω–∞—è: –º–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –ø–æ —Ç–µ–≥–∞–º, –∫–ª–∞—Å—Å–∞–º, —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
```Python
from bs4 import BeautifulSoup

soup = BeautifulSoup(html, "lxml")
title = soup.find("h1").text
```

üß† 3. lxml - –¥–≤–∏–∂–æ–∫ (parser), –∫–æ—Ç–æ—Ä—ã–π BS4 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ‚Äú–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º‚Äù, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å HTML.

üïµÔ∏è‚Äç‚ôÇÔ∏è 4. fake_useragent -–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ User-Agent –∑–∞–≥–æ–ª–æ–≤–∫–∏ ‚Äî –∫–∞–∫ –±—É–¥—Ç–æ —Ç—ã —Ç–æ —Å Chrome, —Ç–æ —Å Safari, —Ç–æ —Å –º–æ–±–∏–ª—å–Ω–∏–∫–∞.
```python
from fake_useragent import UserAgent

ua = UserAgent()
print(ua.random)
# ‚Üí Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/...
```

–ò—Ç–æ–≥–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ requirements.txt:
```txt
requests>=2.31.0
beautifulsoup4>=4.12.3
lxml>=4.9.3
fake-useragent>=1.5.1
```
–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:
```bash
pip install -r requirements.txt
```

#                                  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ `cian_parser/` 

| –ú–æ–¥—É–ª—å            | –ö–ª–∞—Å—Å / –ª–æ–≥–∏–∫–∞                | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å                          |
|------------------|-------------------------------|-------------------------------------------|
| `main.py`         | `Parser.run()`                | –ó–∞–ø—É—Å–∫ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏                      |
| `parser.py`       | `Parser`                      | –û—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –≤—ã–∑–æ–≤: loader ‚Üí parser ‚Üí pipeline |
| `html_loader.py`  | `HtmlLoader`                  | –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å fake-useragent / –ø—Ä–æ–∫—Å–∏  |
| `cian_parser.py`  | `CianParser`                  | –†–∞–∑–±–∏—Ä–∞–µ—Ç HTML ‚Üí list[dict]              |
| `pipeline.py`     | `DataPipeline`                | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ CSV (–∏–ª–∏ Excel/DB –ø–æ—Ç–æ–º)     |
| `proxy.py`        | `ProxyManager` *(–æ–ø—Ü.)*       | –í—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–∫—Å–∏, —Ä–æ—Ç–∞—Ü–∏—è                |
| `utils.py`        | `clean_text()`, `slugify()`   | –û—á–∏—Å—Ç–∫–∞ —Å—Ç—Ä–æ–∫, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è              |
| `settings.py`     | `HEADERS`, `TIMEOUT`, `CSV_PATH` | –ö–æ–Ω—Ñ–∏–≥–∏, –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏–º –≤ –∫–æ–¥–µ          |
| `data/output.csv` | ‚Äî                             | –ì–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç                         |

## üì¶ –ö–ª–∞—Å—Å Parser

–ö–ª–∞—Å—Å Parser ‚Äî —ç—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞. –û–Ω –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–∞—Ä—Å–∏–Ω–≥–∞: –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ HTML –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ CSV.

### üîß –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
	‚Ä¢	–ü–æ–ª—É—á–∞–µ—Ç HTML-–∫–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¶–ò–ê–ù –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É URL
	‚Ä¢	–ü–µ—Ä–µ–¥–∞—ë—Ç HTML –≤ CianParser, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ü–µ–Ω—É, —Å—Å—ã–ª–∫—É)
	‚Ä¢	–ü–µ—Ä–µ–¥–∞—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ DataPipeline –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª (output_–ì–ì–ì–ì-–ú–ú-–î–î.csv)
	‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –±–∞–Ω–æ–≤ (–ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏, —Å–ª—É—á–∞–π–Ω—ã–π User-Agent)
	‚Ä¢	–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞: Parser(url).run()

### üß© –ò—Å–ø–æ–ª—å–∑—É–µ—Ç:
	‚Ä¢	HtmlLoader ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
	‚Ä¢	CianParser ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞–∑–±–æ—Ä HTML –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
	‚Ä¢	DataPipeline ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ CSV
```python
class Parser:
    def __init__(self, url=BASE_URL):
        self.url = url
        self.loader = HtmlLoader(url)
        self.parser = CianParser()
        self.pipeline = DataPipeline()
```
### üöÄ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```python
from cian_parser.parser import Parser

parser = Parser()
parser.run()
```