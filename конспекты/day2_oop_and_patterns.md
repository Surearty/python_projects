
# üß† –î–µ–Ω—å 2: –û–û–ü + –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–∞—Ä—Å–µ—Ä–∞

---

## üêç –ß—Ç–æ —Ç–∞–∫–æ–µ –û–û–ü?
**–û–±—ä–µ–∫—Ç–Ω–æ-–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–û–û–ü)** ‚Äî —ç—Ç–æ —Å—Ç–∏–ª—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞, –≥–¥–µ –≤—Å—ë —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ –æ–±—ä–µ–∫—Ç–æ–≤ (–∫–ª–∞—Å—Å–æ–≤), —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å **–¥–∞–Ω–Ω—ã–µ (–∞—Ç—Ä–∏–±—É—Ç—ã)** –∏ **–ø–æ–≤–µ–¥–µ–Ω–∏–µ (–º–µ—Ç–æ–¥—ã)**.

---

### üîß –ß–µ—Ç—ã—Ä–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –û–û–ü
| –ü—Ä–∏–Ω—Ü–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|----------------|--------------------------------------------------------------------------|
| –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ   | –ö–ª–∞—Å—Å—ã –º–æ–≥—É—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤                    |
| –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è   | –ü—Ä—è—á–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–∞, –Ω–∞—Ä—É–∂—É ‚Äî —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã              |
| –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º    | –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –º–µ—Ç–æ–¥ ‚Äî —Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–∞—Ö                |
| –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è     | –†–∞–±–æ—Ç–∞–µ–º —Å "–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º", –Ω–µ –¥—É–º–∞—è –æ –¥–µ—Ç–∞–ª—è—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏         |

---

## üì¶ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏–º –û–û–ü –≤ –Ω–∞—à–µ–º –ø–∞—Ä—Å–µ—Ä–µ?

### ‚úÖ –ö–ª–∞—Å—Å—ã –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:
- `CianParser` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä (–±–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞)
- `CianNewBuildingParser` ‚Äî –ø–∞—Ä—Å–µ—Ä –Ω–æ–≤–æ—Å—Ç—Ä–æ–µ–∫
- `CianSecondaryParser` ‚Äî –ø–∞—Ä—Å–µ—Ä –≤—Ç–æ—Ä–∏—á–∫–∏
- `ProxyManager` ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–∫—Å–∏
- `RequestBuilder` ‚Äî —Å—Ç—Ä–æ–∏—Ç –∑–∞–ø—Ä–æ—Å—ã
- `HTMLExtractor` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ HTML
- `CSVWriter` ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ CSV
- `TelegramNotifier` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### üß± –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞:
```python
class CianParser:
    def __init__(self, city, max_price):
        self.city = city
        self.max_price = max_price

    def build_url(self):
        return f"https://cian.ru/search?city={self.city}&max_price={self.max_price}"

    def fetch(self, url):
        # –ª–æ–≥–∏–∫–∞ –∞–Ω—Ç–∏–±–∞–Ω–∞, –∑–∞–ø—Ä–æ—Å
        pass

    def parse(self, html):
        # —Ä–∞–∑–±–æ—Ä html
        pass

    def run(self):
        url = self.build_url()
        html = self.fetch(url)
        data = self.parse(html)
        return data
```

---

## üß† –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≥–æ–¥—è—Ç—Å—è

### 1. **Builder** ‚Äî —Å–±–æ—Ä–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö URL
> –£–¥–æ–±–Ω–æ, –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–Ω–æ–≥–æ

```python
class RequestBuilder:
    def __init__(self):
        self.params = {}

    def set_city(self, city):
        self.params['city'] = city
        return self

    def set_price(self, max_price):
        self.params['max_price'] = max_price
        return self

    def build(self):
        return f"https://cian.ru/search?" + urlencode(self.params)
```

---

### 2. **Strategy** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω—Ç–∏–±–∞–Ω-–º–µ—Ç–æ–¥–æ–≤
```python
class ProxyStrategy:
    def get_proxy(self):
        raise NotImplementedError

class MobileProxy(ProxyStrategy):
    def get_proxy(self):
        return 'http://mobile-proxy.ru/1234'

class TorProxy(ProxyStrategy):
    def get_proxy(self):
        return 'socks5://127.0.0.1:9050'
```

---

### 3. **Factory** ‚Äî –≤—ã–±–∏—Ä–∞–µ–º –Ω—É–∂–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
```python
class ParserFactory:
    def get_parser(self, type_):
        if type_ == '–Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏':
            return CianNewBuildingParser()
        return CianSecondaryParser()
```

---

### 4. **Adapter** ‚Äî —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–¶–ò–ê–ù, –ê–≤–∏—Ç–æ)
```python
class BaseParser:
    def fetch(self):
        pass
    def parse(self):
        pass

class AvitoAdapter(BaseParser):
    def fetch(self):
        # —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è –ê–≤–∏—Ç–æ
        pass
```

---

## ‚öôÔ∏è –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
- –° —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è **–≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–µ–ª–∞–µ–º —Å –û–û–ü –ø–æ–¥—Ö–æ–¥–æ–º**.
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–º–æ–≥–∞—é—Ç –ø–∏—Å–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ, –∫—Ä–∞—Å–∏–≤–æ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ.
- –î–∞–∂–µ –º–∞–ª–µ–Ω—å–∫–∏–π MVP –ø–∞—Ä—Å–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º —Å—Ç–∞—Ç—å SaaS-–ø—Ä–æ–¥—É–∫—Ç–æ–º.

üî• –ü–∏—à–∏, –∫–∞–∫ PRO. –ú—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —É—á–∏–º—Å—è ‚Äî –º—ã —Å—Ç—Ä–æ–∏–º –±—É–¥—É—â–µ–µ.
